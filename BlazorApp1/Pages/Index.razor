@page "/"
@using Al.Components.Blazor.DataGrid
@using BlazorApp1.Data
@using Al.Components.Blazor.DataGrid.Model.Data

@inject WeatherForecastService service

<AlDataGrid T=WeatherForecast
            DataProvider=_dataProvider
            OperationExpressionResolver=_operationResolver>
    <Columns>
        <Column T=WeatherForecast
                FieldExpression="x => x.Date" 
                Width=150/>
        <Column T=WeatherForecast
                FieldExpression="x => x.TemperatureC"
                Width=200/>
    </Columns>
</AlDataGrid>

@code {



    IDataProvider<WeatherForecast> _dataProvider;
    OperationResolver _operationResolver = new OperationResolver();


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        var data = await service.GetForecastAsync(DateTime.Now);

        _dataProvider = new SimpleListDataProvider<WeatherForecast>(data.ToList());


    }
}